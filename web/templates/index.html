<!DOCTYPE html>
<html lang = "en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <link rel="stylesheet" href="css/uikit.min.css" />
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
        <script src="js/uikit.min.js"></script>
        <script src="js/uikit-icons.min.js"></script>
        <script src="https://go-echarts.github.io/go-echarts-assets/assets/echarts.min.js"></script>
        <script src="https://unpkg.com/htmx.org@1.9.10" integrity="sha384-D1Kt99CQMDuVetoL1lrYwg5t+9QdHe7NLX/SoJYkXDFfX37iInKRy5xLSi8nO7UC" crossorigin="anonymous"></script>
        <title>HART</title>
    </head>
    <body>
        <nav class="uk-navbar-container" uk-navbar style="background-color: rgb(255, 210, 210);">
            <div class="uk-navbar-left">
                <ul class="uk-navbar-nav">
                    <li></li>
                    <li><a href="https://www.hydrologik.com/" target="_blank">
                        <img src="/resources/logo_2.png" width="35" height="35" alt="hydrologik.com">
                    </a></li>
                    <li><a href="/" class=" uk-navbar-item" style="color: black;">Home</a></li>
                    <li><a href="https://github.com/Hydrologik/HART" class="uk-navbar-item uk-logo" style="color: black;" target="_blank">Git</a></li>
                </ul>
            </div>
            <div class="uk-navbar-center">
                <a class="uk-navbar-item uk-logo" href="#HART-modal" uk-toggle>HART</a>
            </div>
            <div class="uk-navbar-right">
                <ul class="uk-navbar-nav">
                    <li>
                        <form action="/logout" method="post">
                            <button class="uk-button uk-button-secondary">logout</button>
                        </form>
                    </li>
                    <li></li>
                </ul>
            </div>
        </nav>
        <div id="main-body" style="background-color: rgb(255, 255, 255);">
            <div class="columns">
                <div class="column is-fullheight is-1" style="width: 125px; background-color: rgb(255, 105, 105);">
                    <div class="block"></div>
                    <div>
                        <section class="hero is-fullheight">
                            <aside class="menu">
                                <h3 class="menu-label">
                                    DataStreams
                                </h3>
                                <ul class="menu-list">
                                    <li><a href="/ignCards?type=client" hx-get="/ignCards?type=client" hx-target="#main-body">Ignition</a></li>
                                    <li><a href="#">HETOLOK</a></li>
                                    <li><a href="#">Go4</a></li>
                                </ul>
                            </aside>
                        </section>
                    </div>
                </div>
                <div class="column">
                    <div>
                        <div class="block"></div>
                        <div class="block">
                            <div id="chart">
                                <a href="/getChart" hx-get="/getChart" hx-target="#chart" hx-trigger="load" hx-indicator="#spinner">.</a>
                                <div id="spinner" class="hidden" uk-spinner></div>
                            </div>
                            <div>
                                <h1 class="uk-article-title">Alarms</h1>
                                <div style="overflow-y: scroll; height: 200px;">
                                    <table class="uk-table uk-table-justify uk-table-divider">
                                        <thead>
                                            <th></th>
                                            <th>State</th>
                                            <th>Type</th>
                                            <th>Source</th>
                                            <th>Entry Date</th>
                                        </thead>
                                        <tbody>
                                            {{$Alert := "Alert"}}
                                            {{$Warn := "Warn"}}
                                            {{range $i, $a := .}}
                                                <tr
                                                {{if eq $a.State $Alert}}
                                                    style="background-color: rgb(240, 185, 196);"
                                                {{else if eq $a.State $Warn}}
                                                    style="background-color: rgb(247, 226, 194);"
                                                {{else}}
                                                    style="background-color: rgb(148, 240, 160);"
                                                {{end}}>
                                                    <td></td>
                                                    <td>{{$a.State}}</td>
                                                    <td>{{$a.Type}}</td>
                                                    <td><a href="/ignTags?c={{$a.Client}}&s={{$a.Site}}&t={{$a.Tag}}" hx-get="/ignTags?c={{$a.Client}}&s={{$a.Site}}&t={{$a.Tag}}" hx-target="#main-body">{{$a.Client}}{{$a.Site}}/{{$a.Tag}}</a></td>
                                                    <td>{{$a.EntryDate}}</td>
                                                </tr>
                                            {{end}}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="column is-one-third">
                    <div class="block"></div>
                    <div class="uk-card uk-card-hover uk-card-default uk-card-large">
                        <div class="uk-card-header">
                            <h2 class="uk-card-title">Current Alarm Statistics</h2>
                        </div>
                        <div class="uk-card-body">
                            <ul uk-accordion>
                                <li class="uk-open">
                                    <a class="uk-accordion-title" href>Stats</a>
                                    <div class="uk-accordion-content">
                                        <p>Stats around all alrms</p>
                                    </div>
                                </li>
                                <li>
                                    <a class="uk-accordion-title" href>Alert</a>
                                    <div class="uk-accordion-content">
                                        <p>Put Alert Alarm Paths here</p>
                                    </div>
                                </li>
                                <li>
                                    <a class="uk-accordion-title" href>Warn</a>
                                    <div class="uk-accordion-content">
                                        <p>Put Warn Tag paths here</p>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="column"></div>
            </div>
        </div>

        <!-- This is the modal -->
        <div id="HART-modal" uk-modal>
            <div class="uk-modal-dialog uk-modal-body">
                <h2 class="uk-modal-title">HART</h2>
                <p>Hydorlogik Advanced Reporting Tool
                    <br>Application for the adminstration of advanced reporting and alerting.
                    <br>Tool allows for the view and adminstration of value based alerts and reporting intervals. Along with creation of Alert targets.
                    <br>Version 0.8.2
                    <br>Hydrologik LLC
                    <br>Email esundblad@hydrologik.com with any bugs or questions.</p>
                <p class="uk-text-right">
                    <button class="uk-button uk-button-default uk-modal-close" type="button">Close</button>
                </p>
            </div>
        </div>
    </body>
</html>